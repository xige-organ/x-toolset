<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
</body>
<script>

/* 
  * desc: æ­¤å·¥å…·ç”¨äºè§£æurl   string -> object
    * åŠŸèƒ½ï¼š æ”¯æŒhashè§£æåˆ°paramsä¸­
    * å‚æ•°è¯´æ˜
      * url  // å¦‚ï¼š https://www.baidu.com?a=1&b=2#yyb
      * isHasHash  // æ˜¯å¦éœ€è¦å°†hashå€¼æ”¾å…¥params
    * è¿”å›å€¼è¯´æ˜
      * URLå¯¹è±¡
        * protocol: parsedUrl.protocol,  // åè®®
        * host: parsedUrl.host, // åŸŸå
        * hostname: parsedUrl.hostname, // åŸŸå
        * port: parsedUrl.port, // ç«¯å£
        * pathname: parsedUrl.pathname, // è·¯å¾„
        * search: parsedUrl.search, // searchå­—ç¬¦ä¸²
        * hash: parsedUrl.hash, // å“ˆå¸Œ
        * params: params  // searchå­—ç¬¦ä¸²å¯¹è±¡[å…¶ä¸­åŒ…å«hash]
    * demo
      * let urlObj = urlFormat({url: 'https://www.example.com/path?foo=bar&baz=qux#hash-value'})
      * è¿”å›å€¼:
        * console.log(urlObj.protocol); // 'https:'
        * console.log(urlObj.host); // 'www.example.com'
        * console.log(urlObj.pathname); // '/path'
        * console.log(urlObj.search); // '?foo=bar&baz=qux'
        * console.log(urlObj.hash); // '#some-hash-value'
        * console.log(urlObj.params); // {foo: 'bar', baz: 'qux', _hash: 'hash-value'}  
*/

function urlFormat({
  url,
  isHasHash = false,
}) {
  try {
    var parsedUrl = new URL(url);
  var params = {};

  parsedUrl.searchParams.forEach(function(value, key) {
    params[key] = value;
  });

  // Add hash as a parameter
  if (parsedUrl.hash && isHasHash) {
    params['_hash'] = parsedUrl.hash.substr(1);
  }

  return {
    protocol: parsedUrl.protocol,
    host: parsedUrl.host,
    hostname: parsedUrl.hostname,
    port: parsedUrl.port,
    search: parsedUrl.search,
    pathname: parsedUrl.pathname,
    hash: parsedUrl.hash,
    params: params
  };
  } catch (e) {
    throw new Error('Invalid URL')
  }
  

}

const { params } = urlFormat({url: 'https://www.baidu.com?a=1&b=2#yyb', isHasHash: true})
// const { params } = urlFormat({url: 'a=1&b=2#yyb', isHasHash: true})
console.log("ğŸš€ ~ file: index.html:71 ~ params:", params)
</script>
</html>